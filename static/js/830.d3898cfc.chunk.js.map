{"version":3,"file":"static/js/830.d3898cfc.chunk.js","mappings":"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","sources":["../../src/core/empty.js","../../src/core/compileErrMsg.js","../../src/core/Field.js","../../src/core/ruleValidate.js","../../src/Form/FormApiProvider.js","../../src/formContext.js","../../src/core/getFieldUtils.js","../../src/core/getIdlePromise.js","../../src/core/groupKey.js","../../src/Form/FormEvent.js","../../src/Form/event/createFieldAddEvent.js","../../src/Form/event/createFieldChangeEvent.js","../../src/Form/event/createFieldRemoveEvent.js","../../src/Form/event/createValidateEvent.js","../../src/Form/event/createResetEvent.js","../../src/Form/event/createSetDataEvent.js","../../src/Form/event/createSetFieldsEvent.js","../../src/Form/event/createSubmitEvent.js","../../src/Form/event/createGroupChangeEvent.js","../../src/Form/event/createGroupRemoveEvent.js","../../src/core/interceptors.js","../../src/Form/useFormTask.js","../../src/core/RULES.js","../../src/Form/index.js","../../src/Form/useFormGroup.js","../../src/Form/useOpenApi.js","../../src/Form/useInterceptors.js","../../src/Group/context.js","../../src/Group/Group.js","../../src/Group/GroupList.js","../../src/core/getFieldValue.js","../../src/Field/useField.js","../../src/Field/useFieldInit.js","../../src/Field/useFieldEvent.js","../../src/useReset.js","../../src/useSubmit.js","../../src/index.js"],"sourcesContent":["import isPlainObject from 'lodash/isPlainObject';\nimport getValues from 'lodash/values';\nimport isArray from 'lodash/isArray';\n\nexport const isNotEmpty = value => {\n  if (isPlainObject(value)) {\n    const values = getValues(value);\n    return values.length > 0 && values.some(item => !!item);\n  } else if (isArray(value)) {\n    return value.length > 0;\n  } else if (typeof value === 'number') {\n    return !isNaN(value);\n  } else {\n    return !(value === undefined || value === null || value === '' || value.length === 0);\n  }\n};\n\nexport const isEmpty = value => !isNotEmpty(value);\n\nexport const filterEmpty = (value = {}) => {\n  if (isArray(value)) {\n    return value.map(item => filterEmpty(item)).filter(isNotEmpty);\n  }\n  if (isPlainObject(value)) {\n    const output = {};\n    Object.keys(value).forEach(key => {\n      const current = filterEmpty(value[key]);\n      if (isNotEmpty(current)) {\n        output[key] = current;\n      }\n    });\n    return output;\n  }\n  return value;\n};\n","const compileErrMsg = (errMsg, label) => {\n  return typeof errMsg === 'string' ? errMsg.replace('%s', label) : errMsg(label);\n};\n\nexport default compileErrMsg;\n","import last from 'lodash/last';\nimport get from 'lodash/get';\nimport isNil from 'lodash/isNil';\nimport clone from 'lodash/clone';\nimport transform from 'lodash/transform';\nimport memoize from 'lodash/memoize';\nimport set from 'lodash/set';\nimport ruleValidate from './ruleValidate';\nimport compileErrMsg from './compileErrMsg';\n\nexport const FORM_FIELD_STATE_ENUM = {\n  PRE_INIT: 'PRE_INIT',\n  INIT: 'INIT'\n};\n\nexport const FORM_FIELD_VALIDATE_STATE_ENUM = {\n  INIT: 'INIT',\n  PENDING: 'PENDING',\n  PASS: 'PASS',\n  ERROR: 'ERROR'\n};\n\nclass Field {\n  static stateToError = memoize(formState => {\n    return Array.from(formState.values())\n      .filter(field => {\n        return get(field, 'validate.status') === FORM_FIELD_VALIDATE_STATE_ENUM.ERROR;\n      })\n      .map(field => {\n        return Object.assign({}, field.validate, {\n          name: field.name,\n          label: field.label,\n          groupName: field.groupName,\n          fieldRef: field.fieldRef,\n          groupIndex: field.groupIndex,\n          errMsg: field.getErrMsg()\n        });\n      });\n  });\n\n  constructor({ id, name, associations, formInterceptor, options }) {\n    this.id = id;\n    this.name = name;\n    this.formInterceptor = formInterceptor;\n    this.groupName = null;\n    this.groupIndex = null;\n    this.state = FORM_FIELD_STATE_ENUM.PRE_INIT;\n    this.fieldRef = null;\n    this.associations = {\n      fields: get(associations, 'fields', []).filter(item => !!item.name),\n      callback: get(associations, 'callback', () => {})\n    };\n    this.validate = { status: FORM_FIELD_VALIDATE_STATE_ENUM.INIT };\n    this.value = void 0;\n    this.options = Object.assign({}, options);\n  }\n\n  get isReady() {\n    return this.state === FORM_FIELD_STATE_ENUM.INIT;\n  }\n\n  get isPass() {\n    return this.validate.status === FORM_FIELD_VALIDATE_STATE_ENUM.PASS;\n  }\n\n  static findField = (formState, token) => {\n    if (token.id) {\n      return formState.get(token.id);\n    }\n    if (!token.groupName) {\n      return Array.from(formState.values()).find(field => field.name === token.name);\n    }\n    return Array.from(formState.values()).find(field => field.name === token.name && field.groupName === token.groupName && field.groupIndex === token.groupIndex);\n  };\n\n  static matchField = (field, token) => {\n    return Object.keys(token)\n      .filter(key => !isNil(token[key]))\n      .every(key => field[key] === token[key]);\n  };\n\n  static matchFields = (formState, token) => {\n    if (!token.groupName) {\n      const target = Field.findField(formState, token);\n      return target ? [target] : [];\n    }\n    return Array.from(formState.values()).filter(field => Field.matchField(field, token));\n  };\n\n  static matchAssociationFields = (formState, target) => {\n    return Array.from(formState.values()).filter(field => {\n      if (field.id === target.id) {\n        // 排除自己\n        return false;\n      }\n\n      if (!field.associations.fields && field.associations.fields.length > 0) {\n        return false;\n      }\n\n      return field.associations.fields.some(token => Field.matchField(target, token));\n    });\n  };\n\n  static getFieldValuePath = options => {\n    if (options.groupName && !isNil(options.groupIndex) && last(options.groupName.split('.')) === options.name) {\n      return `${options.groupName}[\"${options.groupIndex}\"]`;\n    }\n    if (options.groupName && !isNil(options.groupIndex)) {\n      return `${options.groupName}[\"${options.groupIndex}\"].${options.name}`;\n    }\n\n    return options.name;\n  };\n\n  static computedFormDataFormState = memoize(state => {\n    return transform(\n      Array.from(state.values()),\n      (result, field) => {\n        if (!field.name) {\n          return;\n        }\n        const fieldValue = field.getFieldValue();\n        set(result, Field.getFieldValuePath(field), fieldValue);\n      },\n      {}\n    );\n  });\n  static computedFieldValueFromFormData = memoize((field, formData) => {\n    return get(formData, Field.getFieldValuePath(field));\n  });\n\n  static stateToIsPass = formState => {\n    return Array.from(formState.values()).every(field => {\n      return field.isPass;\n    });\n  };\n\n  setInfo({ groupName, groupIndex, label, rule, interceptor, noTrim, fieldRef, errMsg }) {\n    this.groupName = groupName;\n    this.groupIndex = groupIndex;\n    this.label = label;\n    this.rule = rule;\n    this.interceptor = interceptor;\n    this.noTrim = noTrim;\n    this.fieldRef = fieldRef;\n    this.errMsg = errMsg;\n    this.state = FORM_FIELD_STATE_ENUM.INIT;\n    this.path = Field.getFieldValuePath(this);\n    return this;\n  }\n\n  getValueFromFormData(formData) {\n    return Field.computedFieldValueFromFormData(this, formData);\n  }\n\n  setFieldValue(value) {\n    this.setValue(this.formInterceptor.input({ value, interceptor: this.interceptor }));\n    return this;\n  }\n\n  getFieldValue() {\n    return this.formInterceptor.output({ value: this.value, interceptor: this.interceptor });\n  }\n\n  getErrState() {\n    if (this.validate.status === FORM_FIELD_VALIDATE_STATE_ENUM.PASS) {\n      return 1;\n    }\n    if (this.validate.status === FORM_FIELD_VALIDATE_STATE_ENUM.ERROR) {\n      return 2;\n    }\n    if (this.validate.status === FORM_FIELD_VALIDATE_STATE_ENUM.PENDING) {\n      return 3;\n    }\n\n    return 0;\n  }\n\n  getErrMsg() {\n    return compileErrMsg(this.errMsg || this.validate.msg || '', this.label);\n  }\n\n  setValidateStatus({ status, msg = '', validateData }) {\n    this.validate = {\n      status: (status => {\n        if (status === 1) {\n          return FORM_FIELD_VALIDATE_STATE_ENUM.PASS;\n        }\n        if (status === 2) {\n          return FORM_FIELD_VALIDATE_STATE_ENUM.ERROR;\n        }\n        return FORM_FIELD_VALIDATE_STATE_ENUM.INIT;\n      })(status),\n      msg,\n      validateData: Object.assign({}, this.validate.validateData, validateData)\n    };\n    return this;\n  }\n\n  async runValidate(rules, getFormData) {\n    const validate = await ruleValidate({\n      field: this.clone(),\n      value: this.value,\n      formRules: rules,\n      getFormData\n    });\n\n    this.validate = {\n      status: validate.result === true ? FORM_FIELD_VALIDATE_STATE_ENUM.PASS : FORM_FIELD_VALIDATE_STATE_ENUM.ERROR,\n      msg: validate.errMsg,\n      validateData: Object.assign({}, validate.data)\n    };\n    return this;\n  }\n\n  setValue(value) {\n    if (this.value === value) {\n      return this;\n    }\n    this.value = value;\n    this.validate = { status: FORM_FIELD_VALIDATE_STATE_ENUM.INIT };\n    return this;\n  }\n\n  deleteValue() {\n    this.setValue(void 0);\n    return this;\n  }\n\n  clone() {\n    return clone(this);\n  }\n}\n\nexport default Field;\n","const ruleValidate = async ({ field, value, formRules, getFormData }) => {\n  if (typeof field.rule === 'function') {\n    return await field.rule(value, Object.assign({}, { data: getFormData() }, { field }));\n  }\n  if (typeof field.rule === 'object' && field.rule instanceof RegExp) {\n    return {\n      result: field.rule.test(value),\n      errMsg: ''\n    };\n  }\n\n  const data = {};\n\n  if (typeof field.rule === 'string') {\n    const rules = field.rule.split(' ').filter(str => str.length > 0);\n    for (let currentRule of rules) {\n      let [key, ...args] = currentRule.split('-');\n      const exec = formRules[key.toUpperCase()];\n      if (typeof exec === 'function') {\n        //空值处理 如果不为REQ规则的规则REQ判断不通过返回正确\n        if (currentRule !== 'REQ') {\n          const emptyRes = formRules['REQ'](value, ...args, Object.assign({}, { data: getFormData() }, { field }));\n          if (emptyRes.result !== true) {\n            return {\n              result: true,\n              errMsg: '',\n              data\n            };\n          }\n        }\n\n        const res = await exec(value, ...args, Object.assign({}, { data: getFormData() }, { field }));\n\n        Object.assign(data, { [key.toUpperCase()]: res.data });\n\n        if (res.result !== true) {\n          return {\n            result: false,\n            errMsg: res.errMsg,\n            data\n          };\n        }\n      } else {\n        console.error(`校验规则${currentRule}不在当前form的rules里面，请确认${field.name}的校验规则${field.rule}是否正确`);\n      }\n    }\n  }\n  return {\n    result: true,\n    errMsg: '',\n    data\n  };\n};\n\nexport default ruleValidate;\n","import React, { createContext, useContext, useMemo, useRef } from 'react';\n\nconst context = createContext({});\n\nconst { Provider, Consumer } = context;\nexport const useFormApi = () => {\n  const { openApiRef } = useContext(context);\n\n  return useMemo(() => {\n    return {\n      get formData() {\n        return openApiRef.current.data;\n      },\n      get formState() {\n        return openApiRef.current.formState;\n      },\n      get openApi() {\n        return openApiRef.current;\n      },\n      get isPass() {\n        return openApiRef.current.isPass;\n      },\n      get errors() {\n        return openApiRef.current.errors;\n      },\n      get emitter() {\n        return openApiRef.current.emitter;\n      }\n    };\n  }, [openApiRef]);\n};\n\nconst FormApiProvider = ({ openApi, children }) => {\n  const openApiRef = useRef(openApi);\n  openApiRef.current = openApi;\n  return <Provider value={{ openApiRef }}>{children}</Provider>;\n};\n\nexport default FormApiProvider;\n","import { createContext, useContext } from 'react';\n\nconst context = createContext({});\n\nexport default context;\nexport const { Provider, Consumer } = context;\nexport const useFormContext = () => useContext(context);\n","const getFieldUtils = formContextRef => {\n  const getField = (id, callback) => {\n    let field = formContextRef.current.getFormState().get(id);\n    if (!field) {\n      return;\n    }\n    return callback(field.clone());\n  };\n\n  const setFieldInfo = field => {\n    return formContextRef.current.setFormState(formState => {\n      if (!formState.get(field.id)) {\n        return formState;\n      }\n      const newFormState = new Map(formState);\n      newFormState.set(field.id, field);\n      return newFormState;\n    });\n  };\n\n  return { getField, setFieldInfo };\n};\n\nexport default getFieldUtils;\n","const getIdlePromise = (...args) => {\n  return new Promise(resolve =>\n    setTimeout(() => {\n      resolve(...args);\n    }, 0)\n  );\n};\n\nexport default getIdlePromise;\n","const groupKey = (groupId, groupName) => {\n  return `${groupId || 'root'}@${groupName}`;\n};\n\nexport default groupKey;\n","import { useRef, useEffect } from 'react';\nimport { useFormContext } from '../formContext';\nimport createFieldAddEvent from './event/createFieldAddEvent';\nimport createFieldChangeEvent from './event/createFieldChangeEvent';\nimport createFieldRemoveEvent from './event/createFieldRemoveEvent';\nimport createSubmitEvent from './event/createSubmitEvent';\nimport createValidateEvent from './event/createValidateEvent';\nimport createResetEvent from './event/createResetEvent';\nimport createSetDataEvent from './event/createSetDataEvent';\nimport createSetFieldsEvent from './event/createSetFieldsEvent';\nimport createGroupChangeEvent from './event/createGroupChangeEvent';\nimport createGroupRemoveEvent from './event/createGroupRemoveEvent';\n\nconst FormEvent = ({ children }) => {\n  const formContext = useFormContext();\n  const formContextRef = useRef(formContext);\n  formContextRef.current = formContext;\n  useEffect(() => {\n    const { emitter, setFormIsMount } = formContextRef.current;\n    //1. 设置表单为挂载状态\n    setFormIsMount(true);\n    emitter.emit('form:mount');\n    return () => {\n      //3. 设置表单为卸载状态\n      emitter.emit('form:unmount');\n    };\n  }, []);\n  useEffect(() => {\n    const { emitter } = formContextRef.current;\n    emitter.addListener('form:field:add', createFieldAddEvent(formContextRef));\n    emitter.addListener('form:field:change', createFieldChangeEvent(formContextRef));\n    emitter.addListener('form:field:remove', createFieldRemoveEvent(formContextRef));\n    emitter.addListener('form:validate', createValidateEvent(formContextRef));\n    emitter.addListener('form:reset', createResetEvent(formContextRef));\n    emitter.addListener('form:set-data', createSetDataEvent(formContextRef));\n    emitter.addListener('form:set-fields', createSetFieldsEvent(formContextRef));\n    emitter.addListener('form:submit', createSubmitEvent(formContextRef));\n\n    emitter.addListener('form-group:change', createGroupChangeEvent(formContextRef));\n    emitter.addListener('form-group:remove', createGroupRemoveEvent(formContextRef));\n\n    return () => {\n      emitter.removeAllListeners();\n    };\n  }, []);\n  return children;\n};\n\nexport default FormEvent;\n","import Field from '../../core/Field';\n\nconst createFieldAddEvent =\n  formContextRef =>\n  ({ id, name, associations }) => {\n    const { setFormState, interceptor, emitter } = formContextRef.current;\n    setFormState(formState => {\n      const newState = new Map(formState);\n      newState.set(\n        id,\n        new Field({\n          id,\n          name,\n          formInterceptor: interceptor,\n          associations\n        })\n      );\n      return newState;\n    });\n    emitter.emit(`form-field:mount:${id}`);\n  };\n\nexport default createFieldAddEvent;\n","import getFieldUtils from '../../core/getFieldUtils';\n\nconst createFieldChangeEvent =\n  formContextRef =>\n  async ({ id, defaultValue, ...fieldProps }) => {\n    const { setFormState, initFormData, emitter } = formContextRef.current;\n    const { getField } = getFieldUtils(formContextRef);\n    getField(id, async field => {\n      field.setInfo(fieldProps);\n      (() => {\n        if (field.value !== void 0) {\n          return;\n        }\n        const fieldInitData = field.getValueFromFormData(initFormData);\n        if (fieldInitData) {\n          field.setFieldValue(fieldInitData);\n          return;\n        }\n        if (defaultValue !== void 0) {\n          field.setFieldValue(defaultValue);\n        }\n      })();\n      setFormState(formState => {\n        const newState = new Map(formState);\n        newState.set(id, field);\n        return newState;\n      });\n\n      if (field.value !== void 0) {\n        emitter.emit(`form-field:input:${field.id}`, { value: field.value });\n      }\n      emitter.emit(`form:field:ready`, field);\n    });\n  };\n\nexport default createFieldChangeEvent;\n","const createFieldRemoveEvent =\n  formContextRef =>\n  ({ id }) => {\n    const { setFormState } = formContextRef.current;\n    setFormState(formState => {\n      const newFormState = new Map(formState);\n      newFormState.delete(id);\n      return newFormState;\n    });\n  };\n\nexport default createFieldRemoveEvent;\n","const createValidateEvent = formContextRef => () => {\n  const { formState, emitter } = formContextRef.current;\n  Array.from(formState.values()).forEach(field => {\n    emitter.emit(`form-field:validate:${field.id}`);\n  });\n};\n\nexport default createValidateEvent;\n","const createResetEvent = formContextRef => () => {\n  const { getFormState, emitter } = formContextRef.current;\n\n  emitter.emit(`form:set-fields`, {\n    data: Array.from(getFormState().values()).map(field => {\n      const newField = field.clone();\n      newField.value = void 0;\n      newField.validate = {};\n      return newField;\n    }),\n    runValidate: false\n  });\n};\n\nexport default createResetEvent;\n","import getIdlePromise from '../../core/getIdlePromise';\n\nconst createSetDataEvent =\n  formContextRef =>\n  async ({ data, runValidate = true }) => {\n    const { setFormState, emitter } = formContextRef.current;\n    setFormState(formState => {\n      const newState = new Map();\n      Array.from(formState.values()).forEach(field => {\n        if (!field.isReady) {\n          return;\n        }\n        const newField = field.clone();\n        newField.setFieldValue(newField.getValueFromFormData(data));\n        newState.set(field.id, newField);\n        emitter.emit(`form-field:input:${field.id}`, { value: newField.value });\n      });\n      return newState;\n    });\n    await getIdlePromise();\n    runValidate &&\n      Array.from(formContextRef.current.formState.values()).forEach(field => {\n        emitter.emit(`form-field:validate:${field.id}`);\n      });\n  };\n\nexport default createSetDataEvent;\n","import Field from '../../core/Field';\nimport getFieldUtils from '../../core/getFieldUtils';\nimport isNil from 'lodash/isNil';\nimport get from 'lodash/get';\n\nconst createSetFieldsEvent =\n  formContextRef =>\n  async ({ data, runValidate = true }) => {\n    const { emitter, getFormState } = formContextRef.current;\n    if (!Array.isArray(data)) {\n      data = [data];\n    }\n\n    const { setFieldInfo, getField } = getFieldUtils(formContextRef);\n\n    const validateFieldIdList = [];\n    data.forEach(item => {\n      const { name, groupName, groupIndex, value, validate } = Object.assign({}, item);\n      const fields = Field.matchFields(getFormState(), { name, groupName, groupIndex });\n      fields &&\n        fields.length > 0 &&\n        fields.forEach(field => {\n          if (!field.isReady) {\n            return;\n          }\n          if (item.hasOwnProperty('value')) {\n            emitter.emit(`form-field:input:${field.id}`, { value: isNil(name) ? get(value, field.name) : value });\n          }\n          getField(field.id, field => {\n            validate ? field.setValidateStatus(validate) : validateFieldIdList.push(field.id);\n            setFieldInfo(field);\n          });\n        });\n    });\n    runValidate &&\n      validateFieldIdList.forEach(id => {\n        emitter.emit(`form-field:validate:${id}`);\n      });\n  };\n\nexport default createSetFieldsEvent;\n","import Field from '../../core/Field';\nimport { filterEmpty } from '../../core/empty';\n\nconst createSubmitEvent =\n  formContextRef =>\n  async (...args) => {\n    const { task, emitter, noFilter, onError, onPrevSubmit, onSubmit, onComplete } = formContextRef.current;\n    formContextRef.current.getFormState().forEach(value => {\n      emitter.emit(`form-field:validate:${value.id}`);\n    });\n    let errors = [],\n      isPass = false,\n      formData = {};\n    try {\n      await task.target;\n      isPass = Field.stateToIsPass(formContextRef.current.getFormState());\n      if (!isPass) {\n        errors = Field.stateToError(formContextRef.current.getFormState());\n        emitter.emit('form:submit:error', errors);\n        onError && (await onError(errors, ...args));\n      } else {\n        const targetFormData = Field.computedFormDataFormState(formContextRef.current.getFormState());\n        formData = noFilter === true ? targetFormData : filterEmpty(targetFormData);\n\n        emitter.emit('form:prev-submit', formData, ...args);\n        if (onPrevSubmit && (await onPrevSubmit(formData, ...args)) === false) {\n          emitter.emit('form:prev-submit:error');\n          return false;\n        }\n        onSubmit && (await onSubmit(formData, ...args));\n        emitter.emit('form:submit:success', formData, ...args);\n      }\n    } catch (e) {\n      console.error(e);\n      emitter.emit('form:error', errors, ...args, e);\n      onError && onError(errors, ...args, e);\n    }\n    emitter.emit('form:submit:complete', { formData, isPass, errors });\n    onComplete && onComplete({ formData, isPass, errors });\n  };\n\nexport default createSubmitEvent;\n","import groupKey from '../../core/groupKey';\n\nconst createGroupChangeEvent =\n  formContextRef =>\n  ({ parentId, name, list }) => {\n    const { setGroup } = formContextRef.current;\n    setGroup(group => {\n      const newGroup = Object.assign({}, group);\n      const key = groupKey(parentId, name);\n      newGroup[key] = list.slice(0);\n      return newGroup;\n    });\n  };\n\nexport default createGroupChangeEvent;\n","import groupKey from '../../core/groupKey';\n\nconst createGroupRemoveEvent =\n  formContextRef =>\n  ({ parentId, name }) => {\n    const { setGroup } = formContextRef.current;\n    setGroup(group => {\n      const newGroup = Object.assign({}, group);\n      const key = groupKey(parentId, name);\n      if (!newGroup[key]) {\n        return;\n      }\n      delete newGroup[key];\n      return newGroup;\n    });\n  };\n\nexport default createGroupRemoveEvent;\n","import compose from '@kne/compose';\nimport uniqBy from 'lodash/uniqBy';\nimport get from 'lodash/get';\n\nconst interceptors = {\n  input: [],\n  output: []\n};\n\ninterceptors.input.use = (name, func) => {\n  return interceptors.input.push({\n    name,\n    exec: func\n  });\n};\n\ninterceptors.output.use = (name, func) => {\n  return interceptors.output.push({\n    name,\n    exec: func\n  });\n};\n\nexport default interceptors;\n\nconst baseInterceptors = interceptors;\n\nexport const runInterceptors = (interceptors, type, names) => {\n  if (!Array.isArray(names)) {\n    names = [names];\n  }\n\n  const allInterceptors = baseInterceptors[type].concat(get(interceptors, type, []));\n\n  const currentInterceptors = names\n    .map(name => {\n      return allInterceptors.find(({ name: interceptorName }) => interceptorName === name);\n    })\n    .filter(target => !!target);\n\n  if (type === 'input') {\n    currentInterceptors.reverse();\n  }\n\n  if (currentInterceptors.length === 0) {\n    return value => value;\n  }\n  return compose(...currentInterceptors.map(({ exec }) => exec));\n};\n","import { useRef, useState } from 'react';\nimport getIdlePromise from '../core/getIdlePromise';\n\nexport const FORM_TASK_STATE_ENUM = {\n  PENDING: 'PENDING',\n  COMPLETE: 'COMPLETE'\n};\n\nclass Task {\n  constructor({ id, runner }) {\n    this.id = id;\n    this.isCancel = false;\n    this.target = Promise.race([\n      Promise.resolve(runner()),\n      new Promise(resolve => {\n        this.resolve = resolve;\n      })\n    ]);\n  }\n\n  cancel(...args) {\n    if (this.isCancel) {\n      return;\n    }\n\n    this.isCancel = true;\n    this.resolve(...args);\n  }\n}\n\nclass TaskList {\n  constructor({ onChange }) {\n    this.list = new Map();\n    this.onChange = onChange;\n  }\n\n  get isComplete() {\n    return this.list.size === 0;\n  }\n\n  async append(id, runner) {\n    const task = new Task({ id, runner });\n    this.expire(id);\n    this.list.set(id, task);\n    task.target.then(() => {\n      this.list.delete(id);\n      this.onChange();\n    });\n    this.onChange();\n    return task.target;\n  }\n\n  expire(id) {\n    const currentTask = this.list.get(id);\n    if (currentTask) {\n      currentTask.cancel();\n      this.list.delete(id);\n    }\n    return this;\n  }\n}\n\nconst useFormTask = () => {\n  const [state, setState] = useState(FORM_TASK_STATE_ENUM.COMPLETE);\n  const taskRef = useRef(\n    new TaskList({\n      onChange() {\n        setState(this.isComplete ? FORM_TASK_STATE_ENUM.COMPLETE : FORM_TASK_STATE_ENUM.PENDING);\n      }\n    })\n  );\n  return {\n    state,\n    append: (id, runner) => {\n      return taskRef.current.append(id, runner);\n    },\n    expire: id => {\n      return taskRef.current.expire(id);\n    },\n    get target() {\n      return getIdlePromise()\n        .then(() => Promise.all(Array.from(taskRef.current.list.values()).map(task => task.target)))\n        .then(getIdlePromise);\n    }\n  };\n};\n\nexport default useFormTask;\n","import { isNotEmpty } from './empty';\n\nconst RULES = {\n  REQ: function (value) {\n    return {\n      result: isNotEmpty(value),\n      errMsg: ''\n    };\n  },\n  TEL: function (value) {\n    return {\n      result: /^1[0-9]{10}$/.test(value),\n      errMsg: '请输入有效的手机号'\n    };\n  },\n  EMAIL: function (value) {\n    return {\n      result: /^([a-zA-Z0-9_.-])+@(([a-zA-Z0-9-])+\\.)+([a-zA-Z0-9]{2,4})+$/.test(value),\n      errMsg: '请输入有效的邮箱'\n    };\n  },\n  LEN: function (value, start, end) {\n    value = value.toString();\n    if (end === start && value.length !== Number(end)) {\n      return {\n        result: false,\n        errMsg: `%s长度必须等于${end}`\n      };\n    }\n    if (value.length < start) {\n      return {\n        result: false,\n        errMsg: `%s长度必须大于${start}`\n      };\n    }\n    if (end && value.length > end) {\n      return {\n        result: false,\n        errMsg: `%s长度必须小于${end}`\n      };\n    }\n    return { result: true };\n  }\n};\nexport default RULES;\nexport const presetRules = (newRules = {}) => {\n  Object.assign(RULES, newRules);\n};\n","import React, { useState, useRef, forwardRef, useImperativeHandle } from 'react';\nimport { Provider } from '../formContext';\nimport FormEvent from './FormEvent';\nimport FormApiProvider from './FormApiProvider';\nimport useFormGroup from './useFormGroup';\nimport useInterceptors from './useInterceptors';\nimport useEvent from '@kne/use-event';\nimport useFormTask from './useFormTask';\nimport useOpenApi from './useOpenApi';\nimport RULES from '../core/RULES';\n\nconst Form = forwardRef(({ data, rules, interceptors, debug, noFilter, onPrevSubmit, onSubmit, onError, onFormDataChange, children }, ref) => {\n  const [formState, setFormState] = useState(new Map());\n  const formStateRef = useRef(formState);\n  const [formIsMount, setFormIsMount] = useState(false);\n  const task = useFormTask();\n  const emitter = useEvent({ debug, name: 'react-form3' });\n  const { group, setGroup } = useFormGroup();\n  const openApi = useOpenApi({ emitter, formStateRef });\n  const interceptor = useInterceptors({ interceptors });\n  useImperativeHandle(ref, () => openApi, [openApi]);\n\n  return (\n    <Provider\n      value={{\n        emitter,\n        openApi,\n        task,\n        formState,\n        getFormState() {\n          return formStateRef.current;\n        },\n        setFormState(input) {\n          const newFormState = typeof input === 'function' ? input(formStateRef.current) : input;\n          formStateRef.current = newFormState;\n          setFormState(newFormState);\n          return newFormState;\n        },\n        formIsMount,\n        setFormIsMount,\n        group,\n        setGroup,\n        initFormData: Object.assign({}, data),\n        rules: Object.assign({}, RULES, rules),\n        interceptor,\n        debug,\n        noFilter,\n        onPrevSubmit,\n        onSubmit,\n        onError,\n        onFormDataChange\n      }}\n    >\n      <FormApiProvider openApi={openApi}>\n        <FormEvent>{children}</FormEvent>\n      </FormApiProvider>\n    </Provider>\n  );\n});\n\nexport default Form;\n","import { useState } from 'react';\n\nconst useFormGroup = () => {\n  const [group, setGroup] = useState(new Map());\n\n  return { group, setGroup };\n};\nexport default useFormGroup;\n","import { useMemo } from 'react';\nimport Field from '../core/Field';\n\nconst useOpenApi = ({ formStateRef, emitter }) => {\n  return useMemo(() => {\n    return {\n      emitter,\n      submit: (...args) => {\n        emitter.emit('form:submit', args);\n      },\n      get isPass() {\n        return Field.stateToIsPass(formStateRef.current);\n      },\n      get formState() {\n        return new Map(formStateRef.current);\n      },\n      get data() {\n        return Field.computedFormDataFormState(formStateRef.current);\n      },\n      set data(data) {\n        emitter.emit('form:set-data', { data });\n      },\n      get errors() {\n        return Field.stateToError(formStateRef.current);\n      },\n      reset() {\n        emitter.emit('form:reset');\n      },\n      onReady(callback) {\n        emitter.addListener('form:mount', () => {\n          callback && callback();\n        });\n      },\n      onDestroy(callback) {\n        emitter.addListener('form:unmount', () => {\n          callback && callback();\n        });\n      },\n      validateField({ name, groupName, groupIndex }) {\n        const field = Field.findField(formStateRef.current, { name, groupName, groupIndex });\n        if (!field) {\n          return;\n        }\n        emitter.emit(`form-field:validate:${field.id}`);\n      },\n      validateAll() {\n        emitter.emit('form:validate');\n      },\n      setFormData: (data, runValidate = true) => {\n        emitter.emit('form:set-data', { data, runValidate });\n      },\n      getFormData() {\n        return Field.computedFormDataFormState(formStateRef.current);\n      },\n      getField({ name, groupName, groupIndex }) {\n        return Field.findField(formStateRef.current, { name, groupName, groupIndex });\n      },\n      getFields({ name, groupName, groupIndex }) {\n        return Field.matchFields(formStateRef.current, { name, groupName, groupIndex });\n      },\n      setFieldValidate({ name, validate, groupName, groupIndex }) {\n        if (!validate) {\n          console.error('必须设置validate参数');\n          return;\n        }\n        emitter.emit('form:set-fields', {\n          data: {\n            name,\n            groupName,\n            groupIndex,\n            validate\n          }\n        });\n      },\n      setField(list, options) {\n        emitter.emit('form:set-fields', Object.assign({}, options, { data: list }));\n      },\n      setFields(list, options) {\n        emitter.emit('form:set-fields', Object.assign({}, options, { data: list }));\n      },\n      setFieldValue({ name, groupName, groupIndex, validate }, value, options) {\n        emitter.emit(\n          'form:set-fields',\n          Object.assign({}, options, {\n            data: {\n              name,\n              groupName,\n              groupIndex,\n              value,\n              validate\n            }\n          })\n        );\n      }\n    };\n  }, [formStateRef, emitter]);\n};\n\nexport default useOpenApi;\n","import { runInterceptors } from '../core/interceptors';\nimport useRefCallback from '@kne/use-ref-callback';\n\nconst useInterceptors = ({ interceptors }) => {\n  const input = useRefCallback(({ value, interceptor }) => {\n      return runInterceptors(interceptors, 'input', interceptor)(value);\n    }),\n    output = useRefCallback(({ value, interceptor }) => {\n      return runInterceptors(interceptors, 'output', interceptor)(value);\n    });\n  return { input, output };\n};\n\nexport default useInterceptors;\n","import { createContext, useContext } from 'react';\n\nconst context = createContext({ id: 'root' });\n\nexport const { Provider } = context;\n\nexport const useGroupContext = () => {\n  return useContext(context);\n};\n\nexport default context;\n","import React, { useMemo } from 'react';\nimport { Provider, useGroupContext } from './context';\nimport { useFormContext } from '../formContext';\nimport groupKey from '../core/groupKey';\nimport get from 'lodash/get';\n\nconst Group = ({ id, name, children, defaultValue }) => {\n  const { group } = useFormContext();\n  const { id: parentId, index: parentIndex, name: parentName } = useGroupContext();\n\n  const index = useMemo(() => {\n    return get(group, groupKey(parentId, name), []).findIndex(item => item.id === id);\n  }, [id, parentId, group, name]);\n\n  const groupName = useMemo(() => {\n    if (index > -1 && parentName) {\n      return `${parentName}[${parentIndex}].${name}`;\n    }\n    return name;\n  }, [parentName, name, index, parentIndex]);\n\n  return (\n    <Provider value={{ id, name: groupName, group, index, defaultValue }}>\n      {children({\n        id,\n        name: groupName,\n        group,\n        index\n      })}\n    </Provider>\n  );\n};\n\nexport default Group;\n","import React, { forwardRef, useEffect, useImperativeHandle, useMemo, useRef, useState } from 'react';\nimport { useFormContext } from '../formContext';\nimport { useGroupContext } from './context';\nimport useRefCallback from '@kne/use-ref-callback';\nimport get from 'lodash/get';\nimport range from 'lodash/range';\nimport Group from './Group';\nimport uniqueId from 'lodash/uniqueId';\n\nconst GroupList = forwardRef(({ name, defaultLength = 1, empty, reverseOrder = true, children }, ref) => {\n  const [list, setList] = useState([]);\n  const listRef = useRef(list);\n  listRef.current = list;\n  const { initFormData: initData, emitter } = useFormContext();\n  const { id: parentId, name: parentName, index: parentIndex } = useGroupContext();\n\n  const groupName = useMemo(() => {\n    if (parentIndex > -1 && parentName) {\n      return `${parentName}[${parentIndex}]`;\n    }\n    return '';\n  }, [parentName, parentIndex]);\n\n  const targetPath = groupName ? `${groupName}.${name}` : name;\n\n  const itemIdGenerator = item => Object.assign({}, item, { id: parentId ? uniqueId(parentId + '-') : uniqueId() });\n\n  const bindEvent = useRefCallback(({ groupName, name }) => {\n    const setListFromFormData = value => {\n      const targetList = (() => {\n        if (Number.isInteger(defaultLength) && defaultLength > 0 && !(Array.isArray(value) && value.length >= defaultLength)) {\n          return range(0, defaultLength).map(index => {\n            return listRef.current[index] || itemIdGenerator();\n          });\n        }\n        if (Array.isArray(value)) {\n          return value.map((item, index) => {\n            return listRef.current[index] || itemIdGenerator({ defaultValue: item });\n          });\n        }\n        return [];\n      })();\n      setList(targetList);\n    };\n\n    setListFromFormData(get(initData, groupName ? `${groupName}.${name}` : name));\n    const sub = emitter.addListener('form:set-data', ({ data }) => {\n      setListFromFormData(get(data, groupName ? `${groupName}.${name}` : name));\n    });\n    return () => {\n      sub.remove();\n    };\n  });\n\n  useEffect(() => {\n    emitter.emit('form-group:change', { parentId, name, list });\n  }, [list, parentId, name, emitter]);\n\n  useEffect(() => {\n    return () => {\n      emitter.emit('form-group:remove', { parentId, name });\n    };\n  }, [parentId, name]);\n\n  useEffect(() => {\n    return bindEvent({ groupName, name });\n  }, [groupName, name]);\n\n  const addHandler = useRefCallback(options => {\n    const { defaultValue } = Object.assign({}, options);\n    setList(list => {\n      if (list.length === 0) {\n        return [{ id: uniqueId(parentId) }];\n      }\n      const newList = list.slice(0);\n      newList.push(itemIdGenerator({ defaultValue }));\n      return newList;\n    });\n  });\n\n  const removeHandler = useRefCallback(id => {\n    setList(list => {\n      const index = list.findIndex(item => item.id === id);\n      const target = get(initData, targetPath);\n      if (Array.isArray(target)) {\n        target.splice(index, 1);\n      }\n      const newList = list.slice(0);\n      newList.splice(index, 1);\n      return newList;\n    });\n  });\n\n  useImperativeHandle(ref, () => {\n    return {\n      onAdd: addHandler,\n      onRemove: removeHandler\n    };\n  });\n\n  if (list.length === 0) {\n    return empty;\n  }\n\n  return (reverseOrder ? list.slice(0).reverse() : list).map(({ id, defaultValue }) => {\n    return (\n      <Group key={id} id={id} name={name} defaultValue={defaultValue}>\n        {({ index }) => {\n          return children({\n            id,\n            index,\n            length: list.length,\n            onAdd: addHandler,\n            onRemove: () => removeHandler(id)\n          });\n        }}\n      </Group>\n    );\n  });\n});\n\nexport default GroupList;\n","import get from 'lodash/get';\n\nconst isEvent = event => {\n  return window.Event && (event instanceof window.Event || get(event, 'nativeEvent') instanceof window.Event || typeof get(event, 'preventDefault') === 'function');\n};\n\nconst getFieldValue = (event, value) => {\n  if (isEvent(event)) {\n    if (value === undefined) {\n      switch (event.target.type) {\n        case 'checkbox':\n        case 'radio':\n          value = event.target.checked;\n          break;\n        default:\n          value = event.target.value;\n      }\n    }\n  } else {\n    value = event;\n  }\n  return value;\n};\n\nexport default getFieldValue;\n","import { useId, useState } from 'react';\nimport { useGroup } from '../Group';\nimport { useFormContext } from '../formContext';\nimport useFieldInit from './useFieldInit';\nimport useFieldEvent from './useFieldEvent';\nimport get from 'lodash/get';\nimport Field from '../core/Field';\n\nconst useField = ({ name, rule, label, interceptor, associations, noTrim, debounce: time = 0, onChange, defaultValue, errMsg, ...args }) => {\n  const id = useId();\n  const { index: groupIndex, name: groupName, defaultValue: defaultGroupValue } = useGroup();\n  const { formState } = useFormContext();\n  const [associationOptions, setAssociationOptions] = useState({});\n\n  const fieldRef = useFieldInit({\n    name,\n    rule,\n    label,\n    interceptor,\n    associations: {\n      fields: get(associations, 'fields', []),\n      callback: (...args) => {\n        setAssociationOptions(Object.assign({}, associations?.callback(...args)));\n      }\n    },\n    noTrim,\n    defaultValue: get(defaultGroupValue, name) || defaultValue,\n    id,\n    groupName,\n    groupIndex,\n    errMsg\n  });\n  const { validate, isValueChanged, dataChange, value } = useFieldEvent({ id, time, onChange });\n  const field = formState.get(id),\n    formData = Field.computedFormDataFormState(formState);\n  const outputProps = {\n    ...args,\n    id,\n    name,\n    label,\n    value,\n    fieldRef,\n    formData,\n    formState,\n    rule,\n    groupName,\n    groupIndex,\n    onChange: dataChange,\n    isValueChanged,\n    triggerValidate: validate,\n    associationOptions\n  };\n\n  if (!field) {\n    return outputProps;\n  }\n\n  return Object.assign({}, outputProps, {\n    value: value,\n    errState: field.getErrState(),\n    errMsg: field.getErrMsg()\n  });\n};\n\nexport default useField;\n","import { useEffect, useRef, useState } from 'react';\nimport { useFormContext } from '../formContext';\n\nconst useFieldInit = ({ name, rule, label, interceptor, associations, noTrim, defaultValue, id, groupName, groupIndex, errMsg }) => {\n  const [fieldIsMount, setFieldIsMount] = useState(false);\n  const fieldRef = useRef(null);\n  const { formIsMount, emitter } = useFormContext();\n  const associationsRef = useRef(associations);\n  useEffect(() => {\n    let isEmit = false;\n    if (formIsMount) {\n      isEmit = true;\n      setFieldIsMount(true);\n      emitter.emit('form:field:add', { name, associations: associationsRef.current, id });\n    }\n    return () => {\n      isEmit && emitter.emit('form:field:remove', { id });\n    };\n  }, [formIsMount, emitter, name, id]);\n\n  useEffect(() => {\n    if (fieldIsMount && groupIndex !== -1) {\n      emitter.emit('form:field:change', {\n        name,\n        rule,\n        label,\n        interceptor,\n        noTrim,\n        id,\n        groupName,\n        groupIndex,\n        defaultValue,\n        fieldRef,\n        errMsg\n      });\n    }\n  }, [fieldIsMount, emitter, name, rule, label, interceptor, noTrim, id, groupName, groupIndex, defaultValue, fieldRef, errMsg]);\n\n  return fieldRef;\n};\n\nexport default useFieldInit;\n","import { useEffect, useState, useRef } from 'react';\nimport { useFormContext } from '../formContext';\nimport getIdlePromise from '../core/getIdlePromise';\nimport Field, { FORM_FIELD_VALIDATE_STATE_ENUM } from '../core/Field';\nimport useRefCallback from '@kne/use-ref-callback';\nimport getFieldValue from '../core/getFieldValue';\nimport getFieldUtils from '../core/getFieldUtils';\nimport { useDebouncedCallback } from 'use-debounce';\n\nconst useFieldEvent = ({ id, defaultValue, onChange, time }) => {\n  const formContext = useFormContext();\n  const { formIsMount } = formContext;\n  const formContextRef = useRef(formContext);\n  formContextRef.current = formContext;\n  const [isValueChanged, setIsValueChanged] = useState(false);\n  const [value, setValue] = useState(defaultValue);\n  useEffect(() => {\n    if (!formIsMount) {\n      return;\n    }\n    const { getField, setFieldInfo } = getFieldUtils(formContextRef);\n    const { emitter } = formContextRef.current;\n    const listenerTokens = [\n      emitter.addListener(`form-field:input:${id}`, ({ value }) => {\n        setValue(value);\n        setIsValueChanged(true);\n        getField(id, async field => {\n          field.setValue(value);\n          setFieldInfo(field);\n          if (field.getFieldValue() !== void 0) {\n            emitter.emit('form:field:set-value', { id, value: field.getFieldValue(), path: field.path });\n            emitter.emit(`form-field:associations:${id}`);\n          }\n        });\n      }),\n      emitter.addListener(`form-field:format:${id}`, ({ format }) => {\n        getField(id, field => {\n          const formatValue = format(field.value);\n          if (field.value !== formatValue) {\n            emitter.emit(`form-field:input:${id}`, { value: formatValue });\n          }\n        });\n      }),\n      emitter.addListener(`form-field:validate:${id}`, async () => {\n        const { rules, task } = formContextRef.current;\n\n        await task.append(id, async () => {\n          await getField(id, async field => {\n            field.setValidateStatus({ status: FORM_FIELD_VALIDATE_STATE_ENUM.PENDING });\n            setFieldInfo(field);\n          });\n          await getField(id, field => {\n            //处理空格情况\n            if (field.noTrim !== true) {\n              typeof field.value === 'string' && emitter.emit(`form-field:format:${id}`, { format: value => value.trim() });\n            }\n          });\n\n          await getField(id, async field => {\n            //添加到校验任务队列\n            await field.runValidate(rules, () => Field.computedFormDataFormState(formContextRef.current.getFormState()));\n            setFieldInfo(field);\n            emitter.emit(`form-field:validate:complete:${id}`, {\n              validate: field.validate\n            });\n          });\n        });\n      }),\n      emitter.addListener(`form-field:associations:${id}`, async () => {\n        const { getFormState, openApi } = formContextRef.current;\n        getField(id, originField => {\n          Field.matchAssociationFields(getFormState(), originField).forEach(field => {\n            emitter.emit('form-field:associations:callback', { target: field, origin: originField });\n            field.associations?.callback({ target: field, origin: originField, openApi });\n          });\n        });\n      })\n    ];\n    return () => {\n      listenerTokens.forEach(token => {\n        token.remove();\n      });\n    };\n  }, [formIsMount]);\n\n  const dataChange = useRefCallback((...args) => {\n    onChange && onChange(...args);\n    const { emitter } = formContextRef.current;\n    const value = getFieldValue(...args);\n    emitter.emit(`form-field:input:${id}`, { value });\n  });\n\n  const checkValidate = useRefCallback(() => {\n    const { emitter } = formContextRef.current;\n    emitter.emit(`form-field:validate:${id}`);\n  });\n  const debouncedCheckValidate = useDebouncedCallback(checkValidate, time),\n    cancel = debouncedCheckValidate.cancel;\n\n  useEffect(() => {\n    const { emitter } = formContextRef.current;\n    const subscription = emitter.addListener('form:reset', cancel);\n    return () => {\n      subscription && subscription.remove();\n    };\n  }, [cancel]);\n\n  const validate = time ? debouncedCheckValidate : checkValidate;\n\n  return { isValueChanged, value, dataChange, validate };\n};\n\nexport default useFieldEvent;\n","import { useCallback } from 'react';\nimport { useFormContext } from './formContext';\n\nconst useReset = () => {\n  const { emitter } = useFormContext();\n  return {\n    onClick: useCallback(() => {\n      emitter.emit('form:reset');\n    }, [emitter])\n  };\n};\n\nexport default useReset;\n","import { useCallback, useEffect, useState } from 'react';\nimport getIdlePromise from './core/getIdlePromise';\nimport { useFormApi } from './Form/FormApiProvider';\n\nconst useSubmit = props => {\n  const [isLoading, setIsLoading] = useState(false);\n  const formApi = useFormApi();\n  const { onClick } = Object.assign({}, props);\n  useEffect(() => {\n    const target = formApi.emitter.addListener('form:submit:complete', () => {\n      setIsLoading(false);\n    });\n    return () => {\n      target && target.remove();\n    };\n  }, [formApi.emitter]);\n\n  return {\n    isLoading,\n    isPass: formApi.isPass,\n    onClick: useCallback(\n      async (...args) => {\n        setIsLoading(true);\n        try {\n          await getIdlePromise();\n          const returnArgs = onClick && (await onClick(...args));\n          formApi.emitter.emit('form:submit', returnArgs || args);\n        } catch (e) {\n          console.error(e);\n        }\n      },\n      [formApi.emitter, setIsLoading]\n    )\n  };\n};\n\nexport default useSubmit;\n","import { filterEmpty, isEmpty, isNotEmpty } from './core/empty';\nimport compileErrMsg from './core/compileErrMsg';\nimport Field from './core/Field';\nimport { useFormApi } from './Form/FormApiProvider';\n\nconst stateToIsPass = Field.stateToIsPass,\n  stateToError = Field.stateToError,\n  computedFormDataFormState = Field.computedFormDataFormState,\n  findField = Field.findField,\n  matchFields = Field.matchFields,\n  computedFieldValueFromFormData = Field.computedFieldValueFromFormData;\n\nexport { default } from './Form';\nexport {\n  isNotEmpty,\n  isEmpty,\n  filterEmpty,\n  compileErrMsg,\n  stateToIsPass,\n  stateToError,\n  computedFormDataFormState,\n  findField,\n  matchFields,\n  computedFieldValueFromFormData,\n  useFormApi, // 此处为兼容老版本操作，请尽量使用useFormApi\n  useFormApi as useFormContext\n};\nexport { default as useField } from './Field/useField';\nexport { GroupList, useGroup } from './Group';\nexport { presetRules as preset, default as RULES } from './core/RULES';\nexport { default as interceptors } from './core/interceptors';\nexport { default as useReset } from './useReset';\nexport { default as useSubmit } from './useSubmit';\n\nexport const formUtils = {\n  isNotEmpty,\n  isEmpty,\n  filterEmpty,\n  compileErrMsg,\n  stateToIsPass,\n  stateToError,\n  computedFormDataFormState,\n  findField,\n  matchFields,\n  computedFieldValueFromFormData\n};\n"],"names":["isNotEmpty","value","isPlainObject","values","getValues","length","some","item","isArray","isNaN","undefined","isEmpty","filterEmpty","arguments","map","filter","output","Object","keys","forEach","key","current","compileErrMsg","errMsg","label","replace","FORM_FIELD_STATE_ENUM","FORM_FIELD_VALIDATE_STATE_ENUM","Field","constructor","_ref3","id","name","associations","formInterceptor","options","this","groupName","groupIndex","state","fieldRef","fields","get","callback","validate","status","assign","isReady","isPass","setInfo","_ref4","rule","interceptor","noTrim","path","getFieldValuePath","getValueFromFormData","formData","computedFieldValueFromFormData","setFieldValue","setValue","input","getFieldValue","getErrState","getErrMsg","msg","setValidateStatus","_ref5","validateData","runValidate","rules","getFormData","async","field","formRules","_ref2","data","RegExp","result","test","split","str","currentRule","args","exec","toUpperCase","res","console","error","concat","ruleValidate","clone","deleteValue","_Field","stateToError","memoize","formState","Array","from","findField","token","find","matchField","isNil","every","matchFields","target","matchAssociationFields","last","computedFormDataFormState","transform","fieldValue","set","stateToIsPass","context$2","createContext","Provider$2","Consumer","Consumer$1","useFormApi","openApiRef","useContext","useMemo","openApi","errors","emitter","FormApiProvider","_ref6","children","useRef","React","context$1","Provider$1","useFormContext","getFieldUtils","formContextRef","getField","getFormState","setFieldInfo","setFormState","newFormState","Map","getIdlePromise","_len2","_key2","Promise","resolve","setTimeout","groupKey","groupId","FormEvent","_ref11","formContext","useEffect","setFormIsMount","emit","addListener","_ref7","newState","createFieldAddEvent","defaultValue","_ref","fieldProps","_objectWithoutPropertiesLoose","_excluded$1","initFormData","fieldInitData","createFieldChangeEvent","_ref8","delete","createFieldRemoveEvent","createValidateEvent","newField","createResetEvent","_runValidate","_ref9","createSetDataEvent","_ref0","validateFieldIdList","hasOwnProperty","push","createSetFieldsEvent","task","noFilter","onError","onPrevSubmit","onSubmit","onComplete","_len","_key","targetFormData","e","createSubmitEvent","_ref1","parentId","list","setGroup","group","newGroup","slice","createGroupChangeEvent","_ref10","createGroupRemoveEvent","removeAllListeners","interceptors","use","func","baseInterceptors","runInterceptors","type","names","allInterceptors","currentInterceptors","_ref12","interceptorName","reverse","compose","_ref13","FORM_TASK_STATE_ENUM","Task","_ref17","runner","isCancel","race","cancel","TaskList","_ref18","onChange","isComplete","size","append","expire","then","currentTask","useFormTask","setState","useState","taskRef","all","RULES","REQ","TEL","EMAIL","LEN","start","end","toString","Number","presetRules","newRules","Form","forwardRef","_ref25","ref","debug","onFormDataChange","formStateRef","formIsMount","useEvent","useFormGroup","_ref19","submit","_len3","_key3","reset","onReady","onDestroy","validateField","_ref20","validateAll","setFormData","_ref21","getFields","_ref22","setFieldValidate","_ref23","setField","setFields","_ref24","useOpenApi","_ref14","useRefCallback","_ref15","_ref16","useInterceptors","useImperativeHandle","context","Provider","useGroupContext","Group","_ref26","index","parentIndex","parentName","findIndex","GroupList","_ref27","defaultLength","_defaultLength","empty","reverseOrder","_reverseOrder","setList","listRef","initData","targetPath","itemIdGenerator","uniqueId","bindEvent","_ref28","setListFromFormData","targetList","isInteger","range","sub","_ref29","remove","addHandler","newList","removeHandler","splice","onAdd","onRemove","_ref30","_ref31","event","window","Event","isEvent","checked","useField","debounce","time","_excluded","useId","defaultGroupValue","associationOptions","setAssociationOptions","_ref32","fieldIsMount","setFieldIsMount","associationsRef","isEmit","useFieldInit","isValueChanged","dataChange","_ref33","setIsValueChanged","listenerTokens","_ref34","_ref35","format","formatValue","trim","originField","_field$associations","origin","checkValidate","debouncedCheckValidate","useDebouncedCallback","subscription","useFieldEvent","outputProps","_extends","triggerValidate","errState","useReset","onClick","useCallback","useSubmit","props","isLoading","setIsLoading","formApi","_len4","_key4","returnArgs","formUtils"],"ignoreList":[],"sourceRoot":""}